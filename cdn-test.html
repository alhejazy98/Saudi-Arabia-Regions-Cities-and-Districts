<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± CDN - Saudi Geodata</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .success { border-left: 4px solid #4caf50; }
        .error { border-left: 4px solid #f44336; }
        h1 { color: #333; }
        pre {
            background: #f8f8f8;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ‡¸ğŸ‡¦ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù…Ù† CDN</h1>
    <div id="output"></div>

    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù„ÙŠ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
    <script src="https://cdn.jsdelivr.net/gh/alhejazy98/Saudi-Arabia-Regions-Cities-and-Districts@master/dist/index.js"></script>
    
    <script>
        const output = document.getElementById('output');
        
        function addCard(title, content, isError = false) {
            const card = document.createElement('div');
            card.className = 'card ' + (isError ? 'error' : 'success');
            card.innerHTML = `<h3>${title}</h3><pre>${content}</pre>`;
            output.appendChild(card);
        }

        try {
            // Ø§Ø®ØªØ¨Ø§Ø± 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø©
            if (!window.SaudiGeodata) {
                throw new Error('Ø§Ù„Ù…ÙƒØªØ¨Ø© ØºÙŠØ± Ù…Ø­Ù…Ù„Ø© - window.SaudiGeodata ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
            }
            addCard('âœ… 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø©', 'ØªÙ… ØªØ­Ù…ÙŠÙ„ window.SaudiGeodata Ø¨Ù†Ø¬Ø§Ø­');

            const geo = window.SaudiGeodata;
            
            // Ø§Ø®ØªØ¨Ø§Ø± 2: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚
            const regions = geo.getAllRegions();
            addCard('âœ… 2. getAllRegions()', 
                `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚: ${regions.length}\nØ£ÙˆÙ„ Ù…Ù†Ø·Ù‚Ø©: ${regions[0].name_ar}`);

            // Ø§Ø®ØªØ¨Ø§Ø± 3: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ù†
            const cities = geo.getAllCities();
            addCard('âœ… 3. getAllCities()', 
                `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ù†: ${cities.length}\nØ£ÙˆÙ„ Ù…Ø¯ÙŠÙ†Ø©: ${cities[0].name_ar}`);

            // Ø§Ø®ØªØ¨Ø§Ø± 4: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¯Ù†
            const riyadhCities = geo.getCitiesByName('Ø§Ù„Ø±ÙŠØ§Ø¶');
            addCard('âœ… 4. getCitiesByName("Ø§Ù„Ø±ÙŠØ§Ø¶")', 
                `Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬: ${riyadhCities.length}\n${riyadhCities[0].name_ar} (${riyadhCities[0].name_en})`);

            // Ø§Ø®ØªØ¨Ø§Ø± 5: reverse geocoding (Ø§Ø³ØªØ®Ø¯Ù… Ø§Ø³Ù… Ù…ØªØºÙŠØ± Ù…Ø®ØªÙ„Ù)
            const geoResult = geo.reverseGeocode(46.6753, 24.7136);
            if (geoResult) {
                addCard('âœ… 5. reverseGeocode(46.6753, 24.7136)', 
                    `Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${geoResult.region?.name_ar || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\n` +
                    `Ø£Ù‚Ø±Ø¨ Ù…Ø¯ÙŠÙ†Ø©: ${geoResult.nearestCity?.name_ar || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}\n` +
                    `Ø§Ù„Ù…Ø³Ø§ÙØ©: ${geoResult.distance?.toFixed(2) || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} ÙƒÙ…`);
            } else {
                addCard('âš ï¸ 5. reverseGeocode', 'Ø§Ù„Ù†ØªÙŠØ¬Ø© null - Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚', true);
            }

            // Ø§Ø®ØªØ¨Ø§Ø± 6: Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ©
            const city1 = geo.getCityById(3); // Ø§Ù„Ø±ÙŠØ§Ø¶
            const city2 = geo.getCityById(5); // Ø§Ù„Ø·Ø§Ø¦Ù
            if (city1?.center && city2?.center) {
                const distance = geo.calculateDistance(
                    city1.center[0], city1.center[1],
                    city2.center[0], city2.center[1]
                );
                addCard('âœ… 6. calculateDistance()', 
                    `Ù…Ù†: ${city1.name_ar}\n` +
                    `Ø¥Ù„Ù‰: ${city2.name_ar}\n` +
                    `Ø§Ù„Ù…Ø³Ø§ÙØ©: ${distance.toFixed(2)} ÙƒÙ…`);
            } else {
                addCard('âš ï¸ 6. calculateDistance', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª center Ù„Ù„Ù…Ø¯Ù†', true);
            }

            // Ø§Ø®ØªØ¨Ø§Ø± 7: Ø£Ù‚Ø±Ø¨ Ø§Ù„Ù…Ø¯Ù†
            const nearest = geo.findNearestCities(46.6753, 24.7136, 3);
            if (nearest && nearest.length > 0) {
                const nearestList = nearest.map((item, i) => 
                    `${i + 1}. ${item.city.name_ar}: ${item.distance.toFixed(2)} ÙƒÙ…`
                ).join('\n');
                addCard('âœ… 7. findNearestCities()', `Ø£Ù‚Ø±Ø¨ 3 Ù…Ø¯Ù†:\n${nearestList}`);
            } else {
                addCard('âš ï¸ 7. findNearestCities', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬', true);
            }

            // Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
            addCard('ğŸ‰ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©', 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª!\nØ§Ù„Ù…ÙƒØªØ¨Ø© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.');

        } catch (error) {
            addCard('âŒ Ø®Ø·Ø£', `${error.message}\n\nStack:\n${error.stack}`, true);
            console.error('ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£:', error);
        }
    </script>
</body>
</html>
